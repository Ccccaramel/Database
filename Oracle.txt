 Oracle 是甲骨文公司推出的一款关系数据库管理系统
  优点:
    可移植性好
    使用方便
    功能强
    高效率
    可靠性好
    适应高吞吐量
    ...

数据文件(dbf)
  数据文件是数据库的物理存储单位
  数据库的数据是存储在表空间中的
  而一个表空间由一个或多个数据文件组成,一个数据文件只能属于一个表空间
  一个数据文件被加入到某一个表空间后就不能被删除
  如果要删除某个数据文件,只能删除其所属于的表空间才行

表空间
  表空间是 Oracle 对物理数据库上相关数据文件( ORA 或 DBF 文件)的逻辑映射
  一个数据库在逻辑上被划分成一到若干个表空间,每个表空间包含了在逻辑上相关联的一组结构
  每一个数据据库至少有一个表空间( system 空间)
  每个表空间由同一磁盘上的一个或多个文件组成,这些文件叫数据库文件(datafile)
  一个数据库文件只能属于一个表空间

用户
  用户是在实例下建立的,不同实例中可以建相同名字的用户
  表的数据是有用户放入某一个表空间的,而这个表空间会随机把这些表数据放到一个或多个数据文件中
  由于 Oracle 的数据库不是普通的概念, Oracle 是用用户和表空间对数据进行管理和存放的
  但是表不是由表空间去查询的,而是由用户去查询
  因为不同用户可以在同一个表空间建立同一个名字的表,故区分就是用户
                 |---(1:N)---> 用户 --->|---> LHB
                 |               |(N)   |---> LSZ                                                   |<--- LHB <--- 表1
    实例 1 ----->|               |(1)     |---> A.dbf --->|                                         |<--- LSZ <--- 表2
                 |---(1:N)---> 表空间 --->|---> B.dbf --->|---> 每个表随机存储在一个或多个 dbf/ora <---|<--- LSZ <--- 表3
                 |                        |---> C.ora --->|                                         |<--- LHB <--- 表4

                 |---(1:N)---> 用户 --->|---> LHB
                 |               |(N)   |---> ZZY                                                  
    实例 2 ----->|               |(1)     |---> D.dbf --->|                                         |<--- LHB <--- 表a
                 |---(1:N)---> 表空间 --->|---> E.ora --->|---> 每个表随机存储在一个或多个 dbf/ora <---|<--- ZZY <--- 表b
                 |                        |---> C.ora --->|                                         |<--- ZZY <--- 表c
  初始用户:SCOTT HR

 SQL 语言
  DDL:数据库定义语言 - create drop
  DML:数据库操作语言 - insert update delete
  DQL:数据库操作语言 - select
  DCL:数据库控制语言 - grant revoke

☀看见了不常见的两个单词
   grant(同意,授予,允许)
   revoke(取消,废除,撤销)
   涉及到权限,就先学两个单词

Q: 以 ora dbf 为后缀的文件的区别? 
A:无区别

数据库和实例
   Oracle 数据库服务器由一个数据库和至少一个数据库实例组成
  数据库是一组存储数据的文件,而数据库实例则是管理数据库文件的内部结构
  数据库是由后台进程组成
  数据库和实例是紧密相连的,故 Oracle 数据库通常指的是实例和数据库
    内存 <---> 进程 <---> | <---> 文件1
                         | <---> 文件2
        ( Oracle 实例)      ( Oracle 数据库)

物理存储结构
  物理存储结构是存储数据的纯文件
  当执行一个 CREATE DATEBASE 语句来创建一个新的数据库时将创建下列文件
    数据文件
      数据文件包含真实数据,例如销售订单和客户等
      逻辑数据库结构(如表和索引)的数据被物理存储在数据文件中
    控制文件
      每个 Oracle 数据库都有一个包含元数据的控制文件
      元数据用来描述包括数据库名称和数据文件位置的数据库物理结构
    联机重做日志文件
      每个 Oracle 数据库都有一个联机重做日志,里面包含两个或多个联机重做日志文件
      联机重做日志由重做条目组成,能够记录下所有对数据所做的更改
  除上述文件外, Oracle 数据库还包括如参数文件,网络文件,备份文件以及用于备份和恢复的归档重做日志文件等重要文件

逻辑存储结构
   Oracle 数据库使用逻辑存储结构对磁盘空间使用情况进行精密控制
  数据块 - Data blocks
     Oracle 将数据存储在数据块中
      数据块也被称为逻辑块, Oracle 块或页,对应于磁盘上的字节数
  范围 - Extents
    用于存储特定类型信息的逻辑连续数据块的具体数量
  段 - Segments
    段是分配用于存储用户对象(例如表或索引)的一组范围
  表空间 - Tablespaces
    数据库被分成称为表空间的逻辑存储单元
    表空间是段的逻辑容器
    每个表空间至少包含一个数据文件
                    |--- Datafile[Extent(24KB)...] ---| Data Blocks(2KB)
                    |                                 | ...
   Segment(96Kb) ---|
                    |                                 | Data Blocks(2KB)
                    |--- Datafile[Extent(24KB)...] ---| ...

 Oracle 实例
  指客户端应用程序(用户)和数据库之间的接口
   Oracle 实例由三个主要部分组成
    系统全局区(SGA)
      实例启动时分配的共享内存结构,关闭时释放
      它是一组包含一个数据库实例的数据和控制信息的共享内存结构
    程序全局区(PGA)
      会话开始时为每个会话分配的私有内存区,当会话结束时释放
    后台进程
       PMON
         Oracle 最活跃的一个进程,是调节所有其它1进程的进程管理监视器
         PMON 能够清理异常连接的数据库连接,并自动向侦听器进程注册数据库实例
       SMON
        执行系统级清理操作的系统监视进程
        它有两个主要职责,包括在发生故障的情况下自动恢复实例,例如断电和清理临时文件
       DBWn
        数据库编写器
         Oracle 在内存中执行每个操作而不是磁盘,因为在内存中的处理速度比在磁盘上快
         DBWn 进程从磁盘读取数据并将其写回到磁盘
        一个 Oracle 实例有许多数据库编写器,如: DBW0 DBW1 DBW2 等等
       CKPT
        检查点进程
        在 Oracle 中磁盘上的数据称为块,内存中的数据称为缓冲区
        当该块写入缓冲区并更改时,缓冲区变脏,需要将其写入磁盘
         CKPT 进程使用检查点信息更新控制和数据文件头并向脏盘写入脏缓冲区的信号
         Oralce 12c 允许全面和增量检查点
       LGWR
        日志写入过程,是可恢复架构的关键
        在数据库中发生的每一个变化都被写出到一个名为 redo 日志文件中用于恢复目的
        而这些变化是由 LGWR 进程编写和记录的
         LGWR 进程首先将更改写入内存,然后见磁盘写入重做日志,然后将其用于恢复
       ARCn
        归档进程,它将重做日志的内容复制到归档重做日志文件
        存档程序进程可以有多个进程,如: ARC0 ARC1 ARC2
        允许存档程序写入多个目标,如 D:驱动器 E:驱动器或其它存储
       MMON
        收集性能指标的可管理性监控流程
       MMAN
        自动管理 Oracle 数据库内存的内存管理器

Q:执行错误语句,如何回退恢复表数据?
A:在 plsql 中通过 ctrl+e 先查看你执行历史
  允许行移动
    alter table ut enable row movement;
  误操作之前的时间(查询指定时刻的数据)
    select * from ut as of timestamp to_timestamp('2018-03-14 09:30:00','yyyy-mm-dd hh24:mi:ss');
  闪回恢复数据
    flashback table ut to timestamp to_timestamp('2018-03-14 09:30:00','yyyy-mm-dd hh24:mi:ss');
  不知道表名?查看删除的表(根据时间)
    select * from user_recyclebin where DROPTIME >'2018-03-14 10:00:00';

 flashback table 用法介绍
  在人为操作或应用程序错误时,使用 flashback table 语句恢复表到一个早期状态
  表可以闪回到过去的时间点,依赖于系统中撤销数据的数据量
  此外, Oracle 数据库不能恢复到通过任何 DDL 操作改变了表结构的早期状态
   Oracle 强烈建议数据库运行在自动撤销模式下,通过设置 UNDO_MANAGEMENT 初始参数值为 AUTO
  默认是自动模式,另外设置 UNDO_MANAGEMENT 初始化参数的间隔足够大,包括你预计需要的最早数据
  你不能 flashback table 语句,但是你可以执行另一个 flashback table 语句,指定一个早于当前时间的时间点
  要闪回一个表到早期的 SCN 或时间戳,你必须有表的 flashback 对象权限或 flashback any table 系统权限
  闪回列表中的所有表必须启用行移动,除非你是正在闪回表到 before drop ,这种操作称为闪回删除操作,它使用的是回收站中的删除数据,而不撤销数据
  要闪回表到一个还原点,你必须有 select any dictionary 或 flashback any table 系统权限或 SELECT_CATALOG_ROLE 角色
  -> flashback -> table ---|-------------------|---> table ---|---> to ---|---> before -> drop ---|-------------------------------|---> ;
                           |---> schema -> . ->|              |           |                       |---> rename -> to -> table --->| 
                           |<-------------- , <---------------|           |
